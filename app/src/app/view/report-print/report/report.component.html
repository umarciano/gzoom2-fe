<p-growl [life]=10000 [sticky]="false" [value]="msgs"></p-growl>
<form [formGroup]="form" >

  <div class="ui-grid-row" style="margin-bottom: 1em">
    <div class="ui-grid-col-3">
      <label for="workEffortTypeId">{{'Tipologia'|i18n}}*</label>
    </div>
    <!--<div class="ui-grid-col-4" *ngIf="!selectedReport.analysis">
       Se sono in un analisi mostra la lista altrimento il radio button
      <p-dataTable [value]="workEffortTypes" [(selection)]="workEffortType" (onRowSelect)="onRowSelectWorkEffortType($event.data)" dataKey="workEffortTypeId">
        <p-column [style]="{'width':'38px'}" selectionMode="single"></p-column>
        <p-column field="workEffortTypeId">
          <ng-template let-workEffortType="rowData" pTemplate="body">
            <span pTooltip="{{workEffortType.workEffortTypeId}}">{{workEffortType.workEffortTypeName}} </span>
          </ng-template>
        </p-column>
      </p-dataTable>
    </div>-->
    <div class="ui-grid-col-4" *ngIf="!selectedReport.analysis">
      <div *ngFor="let wt of workEffortTypes">
          <p-radioButton formControlName="workEffortTypeId" name="workEffortTypeId" value="{{wt.workEffortTypeId}}" label="{{wt.workEffortTypeName}}" [(ngModel)]="workEffortType.workEffortTypeId" (onClick)="onRowSelectWorkEffortType(wt)" ></p-radioButton>
      </div>
    </div>
    <div class="ui-grid-col-4" *ngIf="selectedReport.analysis">
        <p-dropdown appendTo="body" formControlName="workEffortTypeId" filter="true" [options]="workEffortTypeSelectItem"  [(ngModel)]="workEffortType.workEffortTypeId"  [autoWidth]="false" [style]="{'width':'100%'}">
        </p-dropdown>
    </div>
    <div class="ui-grid-col-5">
      <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!form.controls['workEffortTypeId'].valid&amp;&amp;form.controls['workEffortTypeId'].dirty">
        <i class="fa fa-times"></i>
        {{'Work Effort Type Id is required'|i18n}}
      </div>
    </div>
  </div>

  <div class="ui-grid-row" style="margin-bottom: 1em">
    <div class="ui-grid-col-3">
      <label for="outputFormat">{{'Seleziona il formato'|i18n}}*</label>
    </div>
     <!-- <p-listbox formControlName="outputFormat" [options]="outputFormatSelectItem" [(ngModel)]="outputFormat">
      </p-listbox>
     <p-dataTable [value]="outputFormats" [(selection)]="outputFormat" dataKey="mimeTypeId"  >
        <p-column [style]="{'width':'38px'}" selectionMode="single"></p-column>
        <p-column field="outputFormat">
          <ng-template let-reportType="rowData" pTemplate="body">
            <span pTooltip="{{reportType.mimeTypeId}}">{{reportType.description}}</span>
          </ng-template>
        </p-column>
      </p-dataTable>-->
    <div class="ui-grid-col-4">
      <div *ngFor="let output of outputFormats">
          <p-radioButton formControlName="outputFormat"  name="outputFormat" value="{{output.mimeTypeId}}" label="{{output.description}}" [(ngModel)]="outputFormat.mimeTypeId" ></p-radioButton>
      </div>
    </div>
    <div class="ui-grid-col-5">
        <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!form.controls['outputFormat'].valid&amp;&amp;form.controls['outputFormat'].dirty">
          <i class="fa fa-times"></i>
          {{'output Format is required'|i18n}}
        </div>
      </div>
  </div>


  <div *ngFor="let param of params">

    <div [hidden]="!param.display" class="ui-grid-row" *ngIf="param.paramType == 'MULTILIST'">
      <div class="ui-grid-col-3">
        <label for="{{param.paramName}}">{{param.paramName|i18n}} <label *ngIf="param.mandatory">*</label></label>
      </div>
      <div class="ui-grid-col-4" *ngIf="param.mandatory">
        <p-multiSelect  required class="form-control" appendTo="body" filter="true"
         (onChange)="onChangeAll($event.value, param.paramName)"
         [defaultLabel]="this.i18nService.translate('Select WorkEffort')"
         [options]="paramsSelectItem[param.paramName+'SelectItem']"
         formControlName="{{param.paramName}}"
          [(ngModel)]="paramsValue[param.paramName]"
          [style]="{'width':'100%'}">
        </p-multiSelect>
      </div>
      <div class="ui-grid-col-4" *ngIf="!param.mandatory">
        <p-multiSelect class="form-control" appendTo="body" filter="true"
          (onChange)="onChangeAll($event.value, param.paramName)"
          [options]="paramsSelectItem[param.paramName+'SelectItem']"
          [defaultLabel]="this.i18nService.translate('Select WorkEffort')"
          formControlName="{{param.paramName}}"
          [(ngModel)]="paramsValue[param.paramName]"
          [style]="{'width':'100%'}">
        </p-multiSelect>
      </div>
      <div class="ui-grid-col-5" *ngIf="param.mandatory">
        <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!form.controls[param.paramName].valid&amp;&amp;form.controls[param.paramName].dirty">
          <i class="fa fa-times"></i>
          {{param.paramName|i18n}} {{'is required'|i18n}}
        </div>
      </div>
    </div>

    <div [hidden]="!param.display" class="ui-grid-row" *ngIf="param.paramType == 'LIST'">
      <div class="ui-grid-col-3">
        <label for="{{param.paramName}}">{{param.paramName|i18n}} <label *ngIf="param.mandatory">*</label></label>
      </div>
      <div class="ui-grid-col-4" *ngIf="param.mandatory">
          <p-dropdown required class="form-control" appendTo="body" filter="true"
           (onChange)="onChangeAll($event.value, param.paramName)"
           [options]="paramsSelectItem[param.paramName+'SelectItem']"
           formControlName="{{param.paramName}}"
            [(ngModel)]="paramsValue[param.paramName]"
            [autoWidth]="false" [style]="{'width':'100%'}">
          </p-dropdown>
      </div>
      <div class="ui-grid-col-4" *ngIf="!param.mandatory">
          <p-dropdown class="form-control" appendTo="body" filter="true" (onChange)="onChangeAll($event.value, param.paramName)" [options]="paramsSelectItem[param.paramName+'SelectItem']" formControlName="{{param.paramName}}"  [(ngModel)]="paramsValue[param.paramName]"  [autoWidth]="false" [style]="{'width':'100%'}">
          </p-dropdown>
      </div>
      <div class="ui-grid-col-5" *ngIf="param.mandatory">
        <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!form.controls[param.paramName].valid&amp;&amp;form.controls[param.paramName].dirty">
          <i class="fa fa-times"></i>
          {{param.paramName|i18n}} {{'is required'|i18n}}
        </div>
      </div>
    </div>

    <div [hidden]="!param.display" class="ui-grid-row" *ngIf="param.paramType == 'DATE'">
      <div class="ui-grid-col-3">
        <label for="{{param.paramName}}">{{param.paramName|i18n}}<label *ngIf="param.mandatory">*</label></label>
      </div>
      <div class="ui-grid-col-4" *ngIf="param.mandatory">
          <p-calendar required class="form-control form-control-report" styleClass="calendar-icon" formControlName="{{param.paramName}}" [locale]="i18nService.getCalendarLocale()" [(ngModel)]="paramsValue[param.paramName]" [dateFormat]="i18nService.getFormat('date-short-pcalendar')" name="{{param.paramName}}" [showIcon]="true" icon="fa fa-calendar"></p-calendar>
      </div>
      <div class="ui-grid-col-4" *ngIf="!param.mandatory">
        <p-calendar class="form-control form-control-report" styleClass="calendar-icon" formControlName="{{param.paramName}}" [locale]="i18nService.getCalendarLocale()" [(ngModel)]="paramsValue[param.paramName]" [dateFormat]="i18nService.getFormat('date-short-pcalendar')" name="{{param.paramName}}" [showIcon]="true" icon="fa fa-calendar"></p-calendar>
      </div>
      <div class="ui-grid-col-5" *ngIf="param.mandatory">
        <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!form.controls[param.paramName].valid&amp;&amp;form.controls[param.paramName].dirty">
          <i class="fa fa-times"></i>
          {{param.paramName|i18n}} {{'is required'|i18n}}
        </div>
      </div>
    </div>

    <div [hidden]="!param.display" class="ui-grid-row" *ngIf="param.paramType == 'BOOLEAN'">
      <div class="ui-grid-col-3">
        <label  for="{{param.paramName}}">{{param.paramName|i18n}}</label>
      </div>
      <div class="ui-grid-col-4">
          <p-toggleButton onLabel="{{'SI'|i18n}}" offLabel="{{'NO'|i18n}}" formControlName="{{param.paramName}}" [(ngModel)]="paramsValue[param.paramName]" defa></p-toggleButton>
      </div>
    </div>

    <div [hidden]="!param.display" class="ui-grid-row" *ngIf="param.paramType == 'INPUT'">
      <div class="ui-grid-col-3">
        <label  for="{{param.paramName}}">{{param.paramName|i18n}}</label>
      </div>
      <div class="ui-grid-col-4">
          <input class="form-control" formControlName="{{param.paramName}}" [(ngModel)]="paramsValue[param.paramName]" />
      </div>
    </div>
  </div>


  <p-footer>
    <div class="ui-dialog-buttonpane ui-helper-clearfix">
      <button type="button" (click)="print()" pButton icon="fa fa-print" label="{{'Print'|i18n}}" [disabled]="!form.valid"></button>
      <button type="button" (click)="mail()" pButton icon="fa fa-envelope" label="{{'Mail'|i18n}}" [disabled]="!form.valid" [hidden]="hiddenMail"></button>
      <!--<button type="button" (click)="mail()" pButton icon="fa-envelope" label="{{'Mail'|i18n}}" [disabled]="!form.valid" ></button>-->
    </div>
  </p-footer>

</form>

<div *ngIf="error" class="alert alert-danger">{{error}}</div>
